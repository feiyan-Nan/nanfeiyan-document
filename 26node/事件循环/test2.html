<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <title>Title</title>
</head>
<body>
<div id="main"></div>
<script>
  const main = document.getElementById('main');
  const frg = document.createDocumentFragment();

  for(let i = 0; i < 10; i++) {
    const li = document.createElement('li');
    li.innerHTML = i;
    frg.appendChild(li);
  }
  main.appendChild(frg);

  new Promise((resolve) => {
    resolve();
  }).then(() => {
    console.log('微任务已经执行');
    alert('dom 还未插入')
  });

  setTimeout(() => {
    console.log('宏任务执行');
    alert('dom 已经插入')
  });

</script>
</body>
</html>